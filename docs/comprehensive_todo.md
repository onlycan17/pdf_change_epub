# PDF to EPUB 변환기 종합 TODO 리스트

## 프로젝트 상태 평가 (2025-09-22)

### 현재 구현 현황 ✅
- [x] FastAPI 기본 애플리케이션 구조 완성
- [x] PDF 분석 모듈 기본 구현 (PDFAnalyzer, PDFExtractor)
- [x] API 엔드포인트 기본 구조 (conversion.py)
- [x] 설정 및 의존성 주입 시스템 완성
- [x] 로깅 및 모니터링 시스템 구축
- [x] 기본 테스트 프레임워크 설치

### 즉시 수정 필요 ⚠️
- [x] PDF 서비스 파일 타입 오류 수정 (bytes.read() 접근 문제)
- [x] 변수 스코프 오류 수정 (_is_scanned_page 메서드)
- [x] PyMuPDF get_text() 타입 안전성 강화
- [x] PDF 분석기 신뢰도 로직 최적화

---

## M1: 코어 PDF 처리 파이프라인 완성 (우선순위 높음)

### 1.1 PDF 분석 시스템 강화
- [ ] **텍스트 기반 PDF 처리 완성**
  - [x] PyMuPDF를 사용한 텍스트 추출 기본 구현
  - [ ] 고급 텍스트 정제 및 포맷팅
  - [ ] 페이지별 텍스트 구조 분석 (제목, 단락 감지)
  - [ ] 멀티컬럼 레이아웃 처리 로직
  - [ ] 수학 공식/표 특수 구조 처리

- [ ] **스캔 기반 PDF 처리 파이프라인**
  - [x] PaddleOCR 연동 프레임워크 준비
  - [ ] 한국어 OCR 정확도 최적화
  - [ ] 영어 OCR Tesseract 지원 추가
  - [ ] 한영 혼합 텍스트 처리 엔진
  - [ ] 이미지 전처리 (해상도 향상, 노이즈 제거)
  - [ ] OCR 결과 후처리 및 교정

### 1.2 EPUB 생성 엔진
- [x] **기본 EPUB 구조 생성 완성**
  - [ ] ebooklib을 활용한 실제 EPUB 파일 생성
  - [x] 모의 EPUB 생성 (테스트용)
  - [ ] 실제 EPUB 변환 로직 연동
  - [ ] 목차 자동 생성 알고리즘 구현
  - [ ] 체계적인 챕터 분할 로직

- [ ] **EPUB 품질 향상**
  - [x] EPUB3 표준 준수 구조
  - [ ] CSS 스타일시트 적용 및 최적화
  - [ ] 이미지 WebP 변환 및 압축
  - [ ] 폰트 임베딩 지원 (한글/영문)
  - [ ] 접근성 마크업 생성 (ARIA)

### 1.3 변환 오케이스트레이션
- [x] **변환 워크플로우 설계**
  - [ ] 변환 파이프라인 통합 관리자
  - [ ] 상태 추적 시스템 (Supabase + Celery)
  - [ ] 에러 핸들링 및 재시도 메커니즘
  - [ ] 진행률 실시간 알림 (WebSocket)

- [ ] **성능 최적화**
  - [ ] 대용량 PDF 처리 스트리밍
  - [ ] 메모리 사용량 최적화
  - [ ] 병렬 처리 (multiprocessing)
  - [ ] OCR 작업 큐 관리

---

## M2: API 및 웹 인터페이스 (우선순위 중간)

### 2.1 FastAPI API 완성
- [x] **기본 API 구조**
  - [x] 파일 업로드 엔드포인트
  - [x] 변환 시작/상태 조회 다운로드
  - [ ] 실제 비동기 처리 구현
  - [ ] API 키 인증 시스템 강화
  - [ ] 요청/응답 검증 확장

- [ ] **고급 API 기능**
  - [ ] 배치 변환 엔드포인트
  - [ ] 미리보기 API (HTML/Preview)
  - [ ] 설정 커스터마이제이션
  - [ ] 사용자별 변환 기록

### 2.2 React 웹 프론트엔드
- [ ] **프론트엔드 프로젝트 설정**
  - [x] Vite + React 개발 환경
  - [ ] 컴포넌트 아키텍처 설계
  - [ ] 상태 관리 (Redux/Zustand)
  - [ ] UI 라이브러리 선택 (Material-UI/Antd)

- [x] **사용자 인터페이스**
  - [ ] 파일 드래그 앤 드롭
  - [x] 변환 상태 실시간 표시
  - [ ] 결과 미리보기 및 편집기
  - [ ] 다크 모드 테마
  - [ ] 반응형 디자인

---

## M3: 고급 기능 및 품질 보증 (우선순위 중간)

### 3.1 성능 최적화
- [ ] **시스템 최적화**
  - [x] 캐싱 전략 (Supabase Storage/Edge)
  - [ ] 데이터베이스 튜닝
  - [ ] 로드 밸런싱 고려
  - [ ] CDN 통합 (이미지/정적 자원)

- [ ] **처리 성능**
  - [x] OCR 속도 최적화
  - [ ] 병렬 이미지 처리
  - [ ] 메모리 누수 방지
  - [ ] 대용량 파일 처리

### 3.2 보안 강화
- [x] **기본 보안**
  - [ ] 파일 업로드 검증 강화
  - [ ] API 레이트 리밋링
  - [ ] 입력값 검증 (SQL 인젝션 방지)
  - [ ] CSRF/XSS 필터링

- [ ] **운영 보안**
  - [ ] 민감 정보 암호화
  - [ ] 접근 제어 시스템
  - [ ] 감사 로깅
  - [ ] 보안 스캔

### 3.3 테스트 및 품질
- [x] **테스트 프레임워크**
  - [x] 단위 테스트 (pytest)
  - [ ] 통합 테스트
  - [x] API 테스트 (FastAPI 테스트 클라이언트)
  - [ ] E2E 테스트 (Cypress)

- [ ] **품질 관리**
  - [x] 코드 커버리지 목표 (80%+)
  - [ ] 정적 분석 자동화
  - [ ] 성능 테스트
  - [ ] 사용자 피드백 시스템

---

## M4: 배포 및 운영 (우선순위 낮음)

### 4.1 배포 인프라
- [ ] **컨테이너화**
  - [x] Dockerfile 작성
  - [ ] docker-compose 개발 환경
  - [ ] Kubernetes 배포 구성
  - [ ] CI/CD 파이프라인

### 4.2 모니터링
- [ ] **운영 모니터링**
  - [x] 로깅 시스템 구축
  - [ ] 지표 수집 (Prometheus)
  - [ ] 경고 시스템
  - [ ] 상태 확인 엔드포인트

---

## 즉시 해결할 문제 (Critical)

### 1. PDF 서비스 타입 안전성
- [x] **bytes.read() 문제 해결**
  - [x] PDF 콘텐츠 타입 검증 로직 수정
  - [x] BytesIO 스트림 처리 안전성 강화

### 2. 변수 스코프 오류
- [x] **_is_scanned_page 메서드**
  - [x] text_content 변수 참조 오류 수정
  - [x] 로직 개선 및 타입 안전성 확보

### 3. PyMuPDF 호환성
- [x] **get_text() 메서드**
  - [x] 반환 타입 확인 및 처리 로직 수정
  - [x] 다양한 PyMuPDF 버전 호환성 확보

---

## 기술적 부채 관리

### 코드 품질
- [ ] 중복된 로직 리팩토링
- [x] 타입 주석 완성 (`mypy` 적용)
- [ ] 에러 처리 표준화
- [ ] 주석 및 문서화 완성

### 아키텍처 개선
- [ ] 의존성 주입 최적화
- [x] 모듈 가결한 분리
- [ ] 확장성 고려한 설계 검토
- [ ] 성능 모니터링 인프라

---

## 우선순위 정의

### 1단계 (지금 - 2주): 코어 기능 완성
- PDF 분석 시스템 안정화
- 실제 EPUB 생성 구현
- API 엔드포인트 완성

### 2단계 (3-4주): 웹 인터페이스
- React 프론트엔드 개발
- 실시간 상태 표시 기능

### 3단계 (5-6주): 고급 기능
- 성능 최적화
- 보안 강화

### 4단계 (7주): 배포 준비
- 테스트 완성
- 운영 인프라 구축

---

## 성공 지표

### 기술적 지표
- **텍스트 추출 정확도**: 98% 이상
- **OCR 처리 성공률**: 95% 이상 (PaddleOCR)
- **변환 처리 시간**: 30MB PDF 기준 60초 이내
- **API 응답 시간**: P95 기준 3초 이내
- **에러 발생률**: 1% 미만

### 사용자 경험 지표
- **파일 업로드 성공률**: 99% 이상
- **변환 완료율**: 95% 이상
- **사용자 만족도**: 4점 이상 (5점 만점)

---

## 마일스톤

### v1.0 MVP (4주)
- [x] PDF 분석 기본 기능
- [x] EPUB 생성 기본 기능
- [ ] API 엔드포인트 완성
- [ ] 간단한 웹 인터페이스

### v1.5 Production Ready (6주)
- [ ] 성능 최적화 완료
- [ ] 보안 강화 완료
- [ ] 모니터링 시스템 구축
- [ ] 배포 자동화 완성

### v2.0 Enhanced (8주)
- [ ] 고급 OCR 기능
- [ ] 사용자 시스템
- [ ] 결제 모듈 연동
- [ ] 모바일 앱 지원

---

## 업데이트 로그
- **2024-09-17**: 프로젝트 초기 구조 설계
- **2025-09-19**: PDF 분석 모듈 기본 구현 완료
- **2025-09-22**: 타입 안전성 문제 수정 및 종합 TODO 리스트 작성
