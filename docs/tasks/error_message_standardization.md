# 사용자 친화적 에러 메시지 표준화 작업 문서

## 1. PRD(요구사항 정의서)
- **목표**: 앱 전반에서 노출되는 오류 메시지를 일관된 톤과 구조로 통일해 사용자가 상황을 쉽게 이해하고 다음 행동을 선택할 수 있도록 한다.
- **사용자 가치**: 난해한 기술 용어 대신 친숙한 안내 문구를 제공하여 불안감을 줄이고 신뢰도를 높인다.
- **성공 조건**: 주요 오류 코드에 대해 제목/본문/해결책이 통일된 형태로 노출되고, 동일한 코드가 어느 화면에서든 같은 메시지를 유지한다.

## 2. 아키텍처 명세
- **구성 요소**: 오류 메시지 사전(`errorMessages`), 메시지 조회 유틸(`getErrorMessageByCode`), `Error` 페이지 및 관련 훅/페이지.
- **동작 흐름**: 컴포넌트 또는 서비스가 오류 코드를 전달 → 공통 유틸에서 사용자 메시지 조회 → UI 컴포넌트에 전달.
- **의존성 변화**: 외부 라이브러리 추가 없음, 기존 `utils/error.ts` 확장.

## 3. UI/UX 명세
- **UI 요구**: 오류 타이틀/본문/해결 방법을 기존 `Error` 페이지 스타일에 맞춰 표시. 다른 화면에서도 동일한 메시지 문구 사용.
- **UX 흐름**: 오류 발생 → 사용자에게 원인(쉽게 이해 가능한 문장)과 해결책(다음 행동)을 함께 안내.
- **문구 톤**: 차분하고 안내 중심, 전문용어는 괄호 안에 설명.

## 4. 기술 스택 명세
- **사용 기술**: TypeScript 기반 상수/유틸 모듈, React 컴포넌트에서 import.
- **테스트**: 기존 `npm run check`에 포함된 lint/typecheck로 검증.

## 5. 기능 명세
- 오류 메시지 상수를 `src/constants/errorMessages.ts`로 분리하여 `AppErrorCode` 타입과 함께 정의.
- `Error` 페이지에서 하드코딩한 메시지를 상수 기반 조회로 교체.
- `Payment` 페이지 및 `usePDFConversion` 훅 등 사용자 메시지를 직접 문자열로 다루는 곳을 공통 유틸 호출 방식으로 전환.
- 오류 메시지 조회 유틸이 fallback(설명: 기본값) 메시지를 지원하도록 구현.

## 6. API 명세
- 외부 API 영향 없음.
- 내부 API: `getErrorMessageByCode(code: AppErrorCode)`를 제공.

## 7. ERD / 테이블 명세
- 데이터베이스 변경 없음.

## 8. TODO / TASK 분해
- [x] 오류 코드 및 메시지 목록 정의
- [x] 공통 메시지 상수 및 타입 생성
- [x] Error 페이지에서 공통 상수 사용
- [x] Payment 페이지 및 관련 훅에서 메시지 유틸 사용
- [x] 자동화 검사 수행
- [x] TODO 및 변경 내역 문서 업데이트

## 9. 버전 이력 메모
- **2025-01-28**: 사용자 친화적 에러 메시지 표준화 계획 수립.
- **2025-01-28**: 공통 오류 메시지 사전 도입, 주요 화면/훅 적용 및 자동화 검사 완료.
